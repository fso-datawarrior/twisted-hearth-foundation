@tailwind base;
@tailwind components;
@tailwind utilities;

/* Twisted Fairytale Halloween Design System
All colors are HSL for consistency. Motion respects prefers-reduced-motion.
*/

@layer base {
  :root {
    /* Core Gothic Theme Colors */
    --bg: 219 8% 4%; /* #0B0B0C - Deep charcoal */
    --bg-2: 226 35% 17%; /* #1A1F3A - Midnight purple */
    --ink: 0 0% 93%; /* #EDEDED - Soft white */
    
    /* Fairytale Accent Palette */
    --accent-purple: 285 46% 21%; /* #3B1F4A - Enchanted purple */
    --accent-green: 142 25% 33%; /* #3B6E47 - Forest green */
    --accent-red: 0 100% 27%; /* #8B0000 - Blood red */
    --accent-gold: 44 35% 57%; /* #C5A45D - Ancient gold */
    
    /* Semantic Mappings */
    --background: var(--bg);
    --foreground: var(--ink);
    --card: var(--bg-2);
    --card-foreground: var(--ink);
    --popover: var(--bg-2);
    --popover-foreground: var(--ink);
    --primary: var(--accent-purple);
    --primary-foreground: var(--ink);
    --secondary: var(--bg-2);
    --secondary-foreground: var(--ink);
    --muted: var(--bg-2);
    --muted-foreground: 0 0% 65%;
    --accent: var(--accent-gold);
    --accent-foreground: var(--bg);
    --destructive: var(--accent-red);
    --destructive-foreground: var(--ink);
    --border: 226 35% 25%;
    --input: var(--bg-2);
    --ring: var(--accent-purple);
    --radius: 0.75rem;
    
    /* Component-specific */
    --navbar-bg: rgba(59, 31, 74, 0.95); /* Translucent purple */
    --hero-overlay: rgba(11, 11, 12, 0.6);
    --glow-purple: rgba(197, 164, 93, 0.3);
    --glow-gold: rgba(197, 164, 93, 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground font-body;
    /* Smooth scrolling for better UX */
  scroll-behavior: smooth;
  
  /* Text shadows for hero overlay */
  --text-shadow-gothic: 2px 2px 4px hsl(var(--bg) / 0.8), 
                        0 0 8px hsl(var(--accent-purple) / 0.6);
  }
  
  /* Typography scale */
  .font-heading {
    font-family: 'Cinzel Decorative', serif;
  }
  
  .font-subhead {
    font-family: 'IM Fell English SC', serif;
  }
  
  .font-body {
    font-family: 'Inter', sans-serif;
  }
  
  /* Focus visible for accessibility */
  .focus-visible {
    @apply outline-none ring-2 ring-accent ring-offset-2 ring-offset-background;
  }
  
  /* Global consistent focus ring */
  :where(button, [href], input, select, textarea, [tabindex]):focus-visible {
    outline: 2px solid hsl(var(--accent-gold));
    outline-offset: 2px;
  }
  
  /* Motion system - respects user preferences */
  .motion-safe {
    transition: all 0.2s ease-out;
  }
  
  @media (prefers-reduced-motion: reduce) {
    .motion-safe {
      transition: none;
    }
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Hunt rune found state enhancement */
  .hunt-rune[aria-pressed="true"] { 
    filter: saturate(1.1) brightness(1.1); 
  }
  
  /* Section reveal styles */
  .reveal {
    opacity: 0;
    transform: translateY(10px);
  }

  .reveal--shown {
    opacity: 1;
    transform: translateY(0);
    animation: rise-fade 450ms ease-out both;
  }

  @media (prefers-reduced-motion: reduce) {
    .reveal, .reveal--shown { 
      animation: none !important; 
      transform: none !important; 
      opacity: 1 !important; 
    }
  }
  
  /* Glow effects for interactive elements */
  .glow-purple {
    box-shadow: 0 0 20px var(--glow-purple);
  }
  
  .glow-gold {
    box-shadow: 0 0 20px var(--glow-gold);
  }

  /* Sparkle effect for form inputs */
  .shadow-sparkle {
    box-shadow: 
      0 0 20px hsl(var(--accent-gold) / 0.6),
      0 0 40px hsl(var(--accent-gold) / 0.4),
      0 0 60px hsl(var(--accent-gold) / 0.2),
      inset 0 1px 0 hsl(var(--accent-gold) / 0.3);
    animation: sparkle 2s ease-in-out infinite;
  }

  /* Bright pulsing red haze for RSVP button */
  .glow-red-pulse {
    box-shadow: 
      0 0 30px hsl(var(--accent-red) / 0.8),
      0 0 60px hsl(var(--accent-red) / 0.6),
      0 0 90px hsl(var(--accent-red) / 0.4),
      0 0 120px hsl(var(--accent-red) / 0.2);
    animation: redPulse 2.5s ease-in-out infinite;
  }
  
  /* Gothic text shadow for headings */
  .text-shadow-gothic {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  }
  
  /* Hover tilt effect */
  .hover-tilt {
    transition: transform 0.2s ease-out;
  }
  
  .hover-tilt:hover {
    transform: rotate(-2deg) scale(1.02);
  }
  
  @media (prefers-reduced-motion: reduce) {
    .hover-tilt:hover {
      transform: none;
    }
  }
  
  /* Micro-interactions with motion safety */
  .motion-safe\:hover\:scale-\[1\.01\]:hover {
    transform: scale(1.01);
  }
  
  .motion-safe\:active\:scale-\[0\.99\]:active {
    transform: scale(0.99);
  }
  
  .motion-safe\:hover\:-translate-y-0\.5:hover {
    transform: translateY(-0.125rem);
  }
  
  /* Fade in animations */
  .animate-fade-in {
    animation: fade-in 0.6s ease-out;
  }
  
  .animate-scale-in {
    animation: scale-in 0.3s ease-out;
  }
  
  .animation-delay-300 {
    animation-delay: 0.3s;
  }
  
  .animation-delay-600 {
    animation-delay: 0.6s;
  }
  
  /* Interactive Elements */
  .story-link {
    @apply relative inline-block after:content-[''] after:absolute after:w-full after:scale-x-0 after:h-0.5 after:bottom-0 after:left-0 after:bg-accent-gold after:origin-bottom-right after:transition-transform after:duration-300 hover:after:scale-x-100 hover:after:origin-bottom-left;
  }

  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }

  .hover-tilt {
    @apply transition-transform duration-300 hover:rotate-1;
  }

  .glow-gold {
    @apply shadow-[0_0_20px_hsl(var(--accent-gold)/0.3)] hover:shadow-[0_0_30px_hsl(var(--accent-gold)/0.5)];
  }

  .text-shadow-gothic {
    text-shadow: var(--text-shadow-gothic);
  }

  /* Hero text shadows */
  .hero-title-shadow {
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 8px rgba(197,164,93,0.6);
  }

  .hero-text-shadow {
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
}

@keyframes rise-fade {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes sparkle {
  0%, 100% {
    box-shadow: 
      0 0 20px hsl(var(--accent-gold) / 0.6),
      0 0 40px hsl(var(--accent-gold) / 0.4),
      0 0 60px hsl(var(--accent-gold) / 0.2),
      inset 0 1px 0 hsl(var(--accent-gold) / 0.3);
  }
  50% {
    box-shadow: 
      0 0 30px hsl(var(--accent-gold) / 0.8),
      0 0 60px hsl(var(--accent-gold) / 0.6),
      0 0 90px hsl(var(--accent-gold) / 0.4),
      inset 0 1px 0 hsl(var(--accent-gold) / 0.5);
  }
}

@keyframes redPulse {
  0%, 100% {
    box-shadow: 
      0 0 30px hsl(var(--accent-red) / 0.8),
      0 0 60px hsl(var(--accent-red) / 0.6),
      0 0 90px hsl(var(--accent-red) / 0.4),
      0 0 120px hsl(var(--accent-red) / 0.2);
  }
  50% {
    box-shadow: 
      0 0 50px hsl(var(--accent-red) / 1.0),
      0 0 100px hsl(var(--accent-red) / 0.8),
      0 0 150px hsl(var(--accent-red) / 0.6),
      0 0 200px hsl(var(--accent-red) / 0.3);
  }
}

/* --- Thick Fog with Mouse Clearing Effect --- */
.smoky-fog::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  background: 
    /* Mouse clearing effect - creates transparent "windows" */
    radial-gradient(400px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
      transparent, 
      rgba(255, 255, 255, 0.1) 100%),
    /* Additional mouse clearing for larger area */
    radial-gradient(300px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
      transparent, 
      rgba(255, 255, 255, 0.05) 80%),
    /* White swirling fog patches - layer 1 */
    radial-gradient(600px circle at 20% 30%, 
      rgba(255, 255, 255, 0.3), 
      rgba(255, 255, 255, 0.3) 30%,
      transparent 70%),
    /* White swirling fog patches - layer 2 */
    radial-gradient(800px circle at 80% 70%, 
      rgba(255, 255, 255, 0.25), 
      rgba(255, 255, 255, 0.25) 25%,
      transparent 65%),
    /* White swirling fog patches - layer 3 */
    radial-gradient(500px circle at 50% 10%, 
      rgba(255, 255, 255, 0.35), 
      rgba(255, 255, 255, 0.35) 20%,
      transparent 60%),
    /* White swirling fog patches - layer 4 */
    radial-gradient(700px circle at 10% 80%, 
      rgba(255, 255, 255, 0.2), 
      rgba(255, 255, 255, 0.2) 15%,
      transparent 55%),
    /* White swirling fog patches - layer 5 */
    radial-gradient(900px circle at 90% 20%, 
      rgba(255, 255, 255, 0.15), 
      rgba(255, 255, 255, 0.15) 10%,
      transparent 50%),
    /* White swirling fog patches - layer 6 */
    radial-gradient(400px circle at 60% 40%, 
      rgba(255, 255, 255, 0.4), 
      rgba(255, 255, 255, 0.4) 25%,
      transparent 60%),
    /* White swirling fog patches - layer 7 */
    radial-gradient(550px circle at 30% 60%, 
      rgba(255, 255, 255, 0.28), 
      rgba(255, 255, 255, 0.28) 20%,
      transparent 55%),
    /* Base white mist layer */
    rgba(255, 255, 255, 0.2);
  animation: thickFogDrift 15s ease-in-out infinite;
}

@keyframes thickFogDrift {
  0% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      20% 30%, 80% 70%, 50% 10%, 10% 80%, 90% 20%, 60% 40%, 30% 60%; /* White fog patches (7) */
  }
  12.5% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      30% 25%, 70% 60%, 45% 15%, 15% 75%, 85% 25%, 55% 35%, 25% 55%; /* White fog patches (7) */
  }
  25% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      40% 20%, 60% 50%, 70% 30%, 30% 60%, 80% 40%, 20% 70%, 50% 30%; /* White fog patches (7) */
  }
  37.5% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      50% 35%, 50% 45%, 75% 25%, 25% 55%, 75% 35%, 25% 65%, 45% 40%; /* White fog patches (7) */
  }
  50% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      60% 40%, 40% 30%, 90% 50%, 50% 40%, 70% 60%, 80% 20%, 70% 80%; /* White fog patches (7) */
  }
  62.5% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      70% 50%, 30% 25%, 85% 60%, 40% 35%, 65% 45%, 75% 35%, 60% 70%; /* White fog patches (7) */
  }
  75% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      80% 60%, 20% 80%, 10% 70%, 70% 20%, 50% 80%, 40% 10%, 10% 40%; /* White fog patches (7) */
  }
  87.5% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      70% 45%, 30% 75%, 20% 60%, 60% 30%, 40% 70%, 30% 20%, 20% 50%; /* White fog patches (7) */
  }
  100% { 
    background-position: 
      0% 0%, 0% 0%,  /* Mouse clearing layers (2) */
      20% 30%, 80% 70%, 50% 10%, 10% 80%, 90% 20%, 60% 40%, 30% 60%; /* White fog patches (7) */
  }
}

/* Track mouse for interactive fog */
:root {
  --mouse-x: 50%;
  --mouse-y: 50%;
}

.smoky-fog {
  --mouse-x: 50%;
  --mouse-y: 50%;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .smoky-fog::before { 
    animation: none !important; 
    background: 
      /* Mouse clearing effect - static */
      radial-gradient(400px circle at 50% 50%, 
        transparent, 
        rgba(255, 255, 255, 0.1) 100%),
      radial-gradient(300px circle at 50% 50%, 
        transparent, 
        rgba(255, 255, 255, 0.05) 80%),
      /* Static white fog patches - all 7 layers */
      radial-gradient(600px circle at 20% 30%, 
        rgba(255, 255, 255, 0.15), 
        rgba(255, 255, 255, 0.15) 30%,
        transparent 70%),
      radial-gradient(800px circle at 80% 70%, 
        rgba(255, 255, 255, 0.12), 
        rgba(255, 255, 255, 0.12) 25%,
        transparent 65%),
      radial-gradient(500px circle at 50% 10%, 
        rgba(255, 255, 255, 0.18), 
        rgba(255, 255, 255, 0.18) 20%,
        transparent 60%),
      radial-gradient(700px circle at 10% 80%, 
        rgba(255, 255, 255, 0.1), 
        rgba(255, 255, 255, 0.1) 15%,
        transparent 55%),
      radial-gradient(900px circle at 90% 20%, 
        rgba(255, 255, 255, 0.08), 
        rgba(255, 255, 255, 0.08) 10%,
        transparent 50%),
      radial-gradient(400px circle at 60% 40%, 
        rgba(255, 255, 255, 0.2), 
        rgba(255, 255, 255, 0.2) 25%,
        transparent 60%),
      radial-gradient(550px circle at 30% 60%, 
        rgba(255, 255, 255, 0.14), 
        rgba(255, 255, 255, 0.14) 20%,
        transparent 55%),
      /* Base white mist layer */
      rgba(255, 255, 255, 0.05);
  }
}

/* CSS Fog Animations */
@keyframes fogDrift {
  0%, 100% {
    transform: translateX(0) translateY(0) scale(1);
  }
  25% {
    transform: translateX(-1%) translateY(-0.5%) scale(1.01);
  }
  50% {
    transform: translateX(1%) translateY(0.5%) scale(0.99);
  }
  75% {
    transform: translateX(-0.5%) translateY(1%) scale(1.02);
  }
}

@keyframes fogSwirl1 {
  0%, 100% {
    transform: translateX(0) translateY(0) rotate(0deg) scale(1);
  }
  25% {
    transform: translateX(2%) translateY(-1%) rotate(5deg) scale(1.05);
  }
  50% {
    transform: translateX(-1%) translateY(2%) rotate(-3deg) scale(0.95);
  }
  75% {
    transform: translateX(1%) translateY(1%) rotate(8deg) scale(1.08);
  }
}

@keyframes fogSwirl2 {
  0%, 100% {
    transform: translateX(0) translateY(0) rotate(0deg) scale(1);
  }
  30% {
    transform: translateX(-1.5%) translateY(1.5%) rotate(-7deg) scale(1.03);
  }
  60% {
    transform: translateX(2%) translateY(-1%) rotate(4deg) scale(0.97);
  }
  90% {
    transform: translateX(-0.5%) translateY(2%) rotate(-2deg) scale(1.06);
  }
}

@keyframes fogSwirl3 {
  0%, 100% {
    transform: translateX(0) translateY(0) rotate(0deg) scale(1);
  }
  25% {
    transform: translateX(1%) translateY(-2%) rotate(6deg) scale(1.04);
  }
  50% {
    transform: translateX(-2%) translateY(1%) rotate(-4deg) scale(0.96);
  }
  75% {
    transform: translateX(1.5%) translateY(0.5%) rotate(3deg) scale(1.02);
  }
}

/* Fog Swirl 4 - Fast swirl animation for 5 large circles */
@keyframes fogSwirl4 {
  0% {
    transform: translate(0%, 0%) rotate(0deg) scale(1.0);
  }
  25% {
    transform: translate(5%, -3%) rotate(90deg) scale(1.1);
  }
  50% {
    transform: translate(-2%, 4%) rotate(180deg) scale(0.9);
  }
  75% {
    transform: translate(3%, -2%) rotate(270deg) scale(1.05);
  }
  100% {
    transform: translate(0%, 0%) rotate(360deg) scale(1.0);
  }
}

/* Fog Swirl 5 - Very slow swirl animation for massive circle */
@keyframes fogSwirl5 {
  0% {
    transform: translate(0%, 0%) rotate(0deg) scale(1.0);
  }
  25% {
    transform: translate(2%, -1%) rotate(90deg) scale(1.05);
  }
  50% {
    transform: translate(-1%, 2%) rotate(180deg) scale(0.95);
  }
  75% {
    transform: translate(1%, -1%) rotate(270deg) scale(1.02);
  }
  100% {
    transform: translate(0%, 0%) rotate(360deg) scale(1.0);
  }
}

@keyframes fogQuadrantRotate {
  0% {
    transform: translate(0%, 0%) rotate(0deg) scale(1.0);
  }
  25% {
    transform: translate(50%, 0%) rotate(90deg) scale(1.05);
  }
  50% {
    transform: translate(50%, 50%) rotate(180deg) scale(0.95);
  }
  75% {
    transform: translate(0%, 50%) rotate(270deg) scale(1.02);
  }
  100% {
    transform: translate(0%, 0%) rotate(360deg) scale(1.0);
  }
}

@keyframes fogOpacityPulse {
  0% {
    opacity: 1;
  }
  40% {
    opacity: 0.17;
  }
  50% {
    opacity: 0.17;
  }
  90% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}
