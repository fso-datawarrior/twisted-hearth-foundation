@tailwind base;
@tailwind components;
@tailwind utilities;

/* Twisted Fairytale Halloween Design System
All colors are HSL for consistency. Motion respects prefers-reduced-motion.
*/

@layer base {
  :root {
    /* Core Gothic Theme Colors */
    --bg: 219 8% 4%; /* #0B0B0C - Deep charcoal */
    --bg-2: 226 35% 17%; /* #1A1F3A - Midnight purple */
    --ink: 0 0% 93%; /* #EDEDED - Soft white */
    
    /* Fairytale Accent Palette */
    --accent-purple: 285 46% 21%; /* #3B1F4A - Enchanted purple */
    --accent-green: 142 25% 33%; /* #3B6E47 - Forest green */
    --accent-red: 0 100% 27%; /* #8B0000 - Blood red */
    --accent-gold: 44 35% 57%; /* #C5A45D - Ancient gold */
    
    /* Semantic Mappings */
    --background: var(--bg);
    --foreground: var(--ink);
    --card: var(--bg-2);
    --card-foreground: var(--ink);
    --popover: var(--bg-2);
    --popover-foreground: var(--ink);
    --primary: var(--accent-purple);
    --primary-foreground: var(--ink);
    --secondary: var(--bg-2);
    --secondary-foreground: var(--ink);
    --muted: var(--bg-2);
    --muted-foreground: 0 0% 65%;
    --accent: var(--accent-gold);
    --accent-foreground: var(--bg);
    --destructive: var(--accent-red);
    --destructive-foreground: var(--ink);
    --border: 226 35% 25%;
    --input: var(--bg-2);
    --ring: var(--accent-purple);
    --radius: 0.75rem;
    
    /* Component-specific */
    --navbar-bg: rgba(59, 31, 74, 0.95); /* Translucent purple */
    --hero-overlay: rgba(11, 11, 12, 0.6);
    --glow-purple: rgba(197, 164, 93, 0.3);
    --glow-gold: rgba(197, 164, 93, 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground font-body;
    /* Smooth scrolling for better UX */
  scroll-behavior: smooth;
  
  /* Text shadows for hero overlay */
  --text-shadow-gothic: 2px 2px 4px hsl(var(--bg) / 0.8), 
                        0 0 8px hsl(var(--accent-purple) / 0.6);
  }
  
  /* Typography scale */
  .font-heading {
    font-family: 'Cinzel Decorative', serif;
  }
  
  .font-subhead {
    font-family: 'IM Fell English SC', serif;
  }
  
  .font-body {
    font-family: 'Inter', sans-serif;
  }
  
  /* Focus visible for accessibility */
  .focus-visible {
    @apply outline-none ring-2 ring-accent ring-offset-2 ring-offset-background;
  }
  
  /* Global consistent focus ring */
  :where(button, [href], input, select, textarea, [tabindex]):focus-visible {
    outline: 2px solid hsl(var(--accent-gold));
    outline-offset: 2px;
  }
  
  /* Motion system - respects user preferences */
  .motion-safe {
    transition: all 0.2s ease-out;
  }
  
  @media (prefers-reduced-motion: reduce) {
    .motion-safe {
      transition: none;
    }
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Hunt rune found state enhancement */
  .hunt-rune[aria-pressed="true"] { 
    filter: saturate(1.1) brightness(1.1); 
  }
  
  /* Section reveal styles */
  .reveal {
    opacity: 0;
    transform: translateY(10px);
  }

  .reveal--shown {
    opacity: 1;
    transform: translateY(0);
    animation: rise-fade 450ms ease-out both;
  }

  @media (prefers-reduced-motion: reduce) {
    .reveal, .reveal--shown { 
      animation: none !important; 
      transform: none !important; 
      opacity: 1 !important; 
    }
  }
  
  /* Glow effects for interactive elements */
  .glow-purple {
    box-shadow: 0 0 20px var(--glow-purple);
  }
  
  .glow-gold {
    box-shadow: 0 0 20px var(--glow-gold);
  }
  
  /* Gothic text shadow for headings */
  .text-shadow-gothic {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  }
  
  /* Hover tilt effect */
  .hover-tilt {
    transition: transform 0.2s ease-out;
  }
  
  .hover-tilt:hover {
    transform: rotate(-2deg) scale(1.02);
  }
  
  @media (prefers-reduced-motion: reduce) {
    .hover-tilt:hover {
      transform: none;
    }
  }
  
  /* Micro-interactions with motion safety */
  .motion-safe\:hover\:scale-\[1\.01\]:hover {
    transform: scale(1.01);
  }
  
  .motion-safe\:active\:scale-\[0\.99\]:active {
    transform: scale(0.99);
  }
  
  .motion-safe\:hover\:-translate-y-0\.5:hover {
    transform: translateY(-0.125rem);
  }
  
  /* Fade in animations */
  .animate-fade-in {
    animation: fade-in 0.6s ease-out;
  }
  
  .animate-scale-in {
    animation: scale-in 0.3s ease-out;
  }
  
  .animation-delay-300 {
    animation-delay: 0.3s;
  }
  
  .animation-delay-600 {
    animation-delay: 0.6s;
  }
  
  /* Interactive Elements */
  .story-link {
    @apply relative inline-block after:content-[''] after:absolute after:w-full after:scale-x-0 after:h-0.5 after:bottom-0 after:left-0 after:bg-accent-gold after:origin-bottom-right after:transition-transform after:duration-300 hover:after:scale-x-100 hover:after:origin-bottom-left;
  }

  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }

  .hover-tilt {
    @apply transition-transform duration-300 hover:rotate-1;
  }

  .glow-gold {
    @apply shadow-[0_0_20px_hsl(var(--accent-gold)/0.3)] hover:shadow-[0_0_30px_hsl(var(--accent-gold)/0.5)];
  }

  .text-shadow-gothic {
    text-shadow: var(--text-shadow-gothic);
  }
}

@keyframes rise-fade {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Stagewise Component Inspection Styles */
.stagewise-inspect-mode * {
  position: relative;
}

.stagewise-inspect-mode *:hover {
  outline: 2px solid #3B82F6 !important;
  outline-offset: 2px !important;
  background-color: rgba(59, 130, 246, 0.1) !important;
  cursor: pointer !important;
}

.stagewise-inspect-mode [data-stagewise-component] {
  outline: 2px solid #10B981 !important;
  outline-offset: 2px !important;
  background-color: rgba(16, 185, 129, 0.1) !important;
}

.stagewise-inspect-mode [data-stagewise-component]:hover {
  outline: 2px solid #F59E0B !important;
  outline-offset: 2px !important;
  background-color: rgba(245, 158, 11, 0.2) !important;
}

/* Prevent screenshot functionality on Stagewise buttons */
[data-stagewise-component-info] button {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

[data-stagewise-component-info] button:active {
  transform: scale(0.98);
}

/* Prevent context menu on Stagewise buttons */
[data-stagewise-component-info] button {
  -webkit-context-menu: none;
  -moz-context-menu: none;
  -ms-context-menu: none;
  context-menu: none;
}

/* Isolate Stagewise overlay from component selection */
[data-stagewise-component-info] {
  pointer-events: auto;
  z-index: 10000;
}

[data-stagewise-component-info] * {
  pointer-events: auto;
}

/* Prevent component selection on Stagewise overlay */
[data-stagewise-component-info] {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Stagewise Debug Panel Styles */
[data-stagewise-debug] {
  font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
  font-size: 11px;
  line-height: 1.4;
}

[data-stagewise-performance] {
  font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
  font-size: 11px;
  line-height: 1.4;
}

/* Stagewise Toolbar Animation */
[data-stagewise-toolbar] {
  animation: slideInFromRight 0.3s ease-out;
}

@keyframes slideInFromRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
