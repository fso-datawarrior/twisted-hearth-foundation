# üéÉ Twisted Fairytale Website ‚Äî Master Task Tracker

---

## 1) Supabase Auth + Persistence

**UX Designer‚Äôs Intent:**
Authentication underpins trust and privacy. We want sign-in to feel **lightweight and magical** rather than technical. Guests shouldn‚Äôt juggle passwords ‚Äî instead, they‚Äôll receive a ‚Äúmagic link‚Äù that matches the fairytale vibe. Once logged in, they should remain signed in across sessions until party night, so they don‚Äôt lose scavenger hunt progress or need to re-authenticate to RSVP or upload photos. After the event, the system should gracefully sign everyone out to reset for the next season. For admins, this foundation ensures safe access to RSVP and tournament data.

**Tasks:**

* [x] Install `@supabase/supabase-js`; add env.
* [x] Create `supabaseClient.ts` with persistent sessions.
* [x] Build `AuthProvider` to share login state globally.
* [x] Add `<RequireAuth>` wrapper around RSVP, uploads, comments.
* [x] Auto sign-out after `PARTY_END_ISO`.
* **AC:** Magic link works, sessions persist, auto sign-out happens post-party.

---

## 2) Database & RLS

**UX Designer‚Äôs Intent:**
The database is our **storybook spine**, but privacy rules differ depending on the content type. A guest‚Äôs **RSVP and scavenger hunt progress** are personal ‚Äî only they and the admins should see them. This creates a sense of safety: your RSVP is yours alone, and your hunt journey is private. By contrast, the **photo gallery is collective**: what you upload is meant to be shared with everyone, so guests can browse and celebrate together. Clear isolation for personal data and openness for community content ensures trust, fun, and scalability for future parties.

**Tasks:**

* [x] **Core tables**:

  * `users` (profile data)
  * `rsvps` (isolated per user; 1 per guest)
  * `comments` (threaded guestbook, tied to user)
  * `photos` (uploads visible to all once approved)
  * `vignettes` (past story hooks)

* [x] **Hunt tables** (private per user):

  * `hunt_hints` (master list, public-readable)
  * `hunt_runs`, `hunt_progress`, `hunt_rewards` (only owner + admin can read/write)

* [x] **Tournament tables**:

  * `tournament_registrations` (per user/team entry)
  * `tournament_teams`, `tournament_matches`

* [x] **Roles**:

  * `user_roles` table for admin gating.

* [x] **RLS (Row-Level Security):**

  * **RSVPs & Hunt:** guests can only see/edit their own records; admins see all.
  * **Photos & Comments:** publicly readable; only owner can edit/delete their own; admin can moderate.

* [x] **RPCs:**

  * `upsert_rsvp` (user saves their RSVP)
  * `register_team` (tournament entry)
  * `mark_hint_found` (scavenger hunt progress)

**AC:**

* Guests can only see/update their **own RSVP and hunt progress**.
* Gallery photos and comments are **shared for all guests to view** (after moderation).
* Admins have full visibility and management.

---

## 3) Admin Area (RSVPs + Tournament)

**UX Designer‚Äôs Intent:**
The admin space should feel like a **control tower**, giving Jamie & Kat everything they need at a glance. No SQL, no digging ‚Äî just clean tables, filters, and exports. RSVPs can be searched and adjusted quickly (headcounts, dietary notes, confirmations), while tournament tools let organizers see who‚Äôs playing, match up free agents, and run brackets easily on party night. Navigation must be **clear, guarded, and invisible to non-admins**, keeping the magic intact for guests.

**Tasks:**

* [ ] `/admin/index.tsx` gated by `<RequireAdmin>`.
* [ ] RSVPs page: search, filters, CSV export, inline edits.
* [ ] Tournament page: list entries, assign teams, seed brackets, update match results.
* [ ] Shared components: `AdminTable`, `AdminToolbar`, `CSVExportButton`, `ConfirmModal`, `Pagination`.
* **AC:** Admins manage RSVPs & tournament fully; guests blocked.

---

## 4) RSVP Page (User-Facing)

**UX Designer‚Äôs Intent:**
RSVP is the **core funnel**. It must feel inviting and safe: styled like a parchment or storybook page, simple fields, and no confusing extras. Guests should immediately know what‚Äôs required (Name, Email) and see optional creativity prompts (Costume Idea, Contributions). On submit, they get reassurance via an email confirmation (with the secret address). For accessibility, the form should be uncluttered, keyboard-friendly, and readable on any screen.

**Tasks:**

* [ ] Gate with `<RequireAuth>`.
* [ ] Fields: name, email, attending, guests, notes, consent.
* [ ] Email address should be fillen with the login email. If user want to change it they can
* [ ] Submit ‚Üí `rpc.upsert_rsvp`; trigger Mailjet confirmation with hidden address.
* **AC:** Guests can submit/update easily; confirmation email arrives; admins see data.

---

## 5) Beer Pong Tournament (User-Facing)

**UX Designer‚Äôs Intent:**
This registration should feel **fun, playful, and optional** ‚Äî an extra mini-game for the party. Guests can sign up solo or with a partner, with whimsical touches like a ‚Äúteam tagline‚Äù field. Solo players are flagged so admins can pair them. The UX must balance clarity (‚ÄúSign up for the tournament here‚Äù) with the playful tone of a Halloween bash.

**Tasks:**

* [ ] Build `tournament/register.tsx`.
* [ ] Fields: team name, partner email, skill level, tagline.
* [ ] Solo players auto-marked ‚Äúfree agent.‚Äù
* **AC:** Guests see instant confirmation; admin sees all registrations.

---

## 6) Scavenger Hunt (15 hints, reward modal)

**UX Designer‚Äôs Intent:**
The scavenger hunt is the **playground of the site**. Guests stumble across eerie one-liners while exploring, sparking curiosity and conversation. The progress indicator should be subtle but rewarding, like a storybook ring filling in. When all 15 are found, a reward modal appears with creepy or funny text ‚Äî an ‚ÄúI unlocked something secret!‚Äù moment. Accessibility is crucial: hints must be reachable by hover, tap, or keyboard focus. It should feel like a game that rewards exploration without overwhelming the RSVP purpose.

**Tasks:**

* [ ] Place 15 hints across Hero, Vignettes, Costume, Feast, Footer.
* [ ] Floating progress chip/ring appears after first discovery.
* [ ] Track progress in `localStorage` (Supabase optional).
* [ ] Reward modal pulls from Easter Egg message pool.
* **AC:** Progress persists; 15/15 unlocks reward; fully accessible.

---

## 7) Navigation

**UX Designer‚Äôs Intent:**
Navigation is the **storybook spine** that holds all sections together. On desktop it should be clean and gothic, but on mobile it should feel fluid ‚Äî swiping between pages like flipping storybook chapters. Adding a quick flash of the page name in gold reinforces orientation. The Ruth‚Äôs Bash title in the center should glow subtly, emphasizing the brand. Guests should never feel lost, whether they tap, swipe, or scroll.

**Tasks:**

* [ ] Mobile: show current page name in gold on swipe.
* [ ] Animate logo/text with subtle float/glow.
* [ ] Swipe-to-navigate with wrap-around loop.
* **AC:** Page names flash smoothly; navigation feels magical and intuitive.

---

## 8) Global Styling Update

**UX Designer‚Äôs Intent:**
Colors are **emotional cues**. Costume buttons in light blue provide a playful, standout accent against the dark background, while feast details in gold preserve a regal, decadent feeling. All choices must pass accessibility checks to ensure legibility. This ensures the site feels consistent, deliberate, and immersive, without overwhelming the user.

**Tasks:**

* [ ] Costume button + text ‚Üí light blue.
* [ ] Feast details ‚Üí gold.
* [ ] Verify WCAG AA compliance.
* **AC:** Palette consistent and readable across devices.

---

## 9) Favicon & App Icons

**UX Designer‚Äôs Intent:**
Even the **smallest details matter**. A Halloween-themed favicon (pumpkin, thorn, raven) replaces the default, ensuring the theme extends to the browser tab and device shortcuts. Multiple sizes guarantee crisp rendering everywhere. This reinforces brand polish and professionalism.

**Tasks:**

* [ ] Create `.ico` + `.png` in multiple sizes.
* [ ] Update `_document.tsx` `<link rel="icon">`.
* [ ] Add `site.webmanifest`.
* **AC:** Browser tab & mobile homescreen show correct themed icon.

---

## 10) Hero Video Teaser Montage

**UX Designer‚Äôs Intent:**
The hero video sets the **mood instantly**. Guests land and are enveloped in a cinematic montage of twisted fairytale clues: ribbons, feathers, shards of glass. It should intrigue without spoiling. Overlay text (title, tagline, RSVP CTA) must remain readable against motion. Hidden scavenger hints inside the video reward sharp-eyed explorers. Autoplay must be fast, silent, and respectful of accessibility preferences.

**Tasks:**

* [ ] Produce 25‚Äì30s teaser with vignette props.
* [ ] Add tagline overlay + RSVP button.
* [ ] Hide 1‚Äì2 clickable hints.
* [ ] Optimize encodes + static fallback.
* **AC:** Autoplay muted; loads fast; hints accessible.

---

## 11) Performance & QA

**UX Designer‚Äôs Intent:**
Performance is **part of the experience**. A slow, janky site kills immersion. Guests should feel the site is ‚Äúhauntingly smooth‚Äù ‚Äî loading fast, responding instantly. We‚Äôll run Lighthouse audits to catch regressions, optimize the hero video, and lazy-load heavy routes. Accessibility tests guarantee no guest feels excluded. The result: a spooky site that‚Äôs fun *and* professional.

**Tasks:**

* [ ] Run Lighthouse on all pages (mobile/desktop).
* [ ] Target LCP < 2.5s, CLS < 0.1, FID < 100ms.
* [ ] Lazy-load Admin, Gallery.
* **AC:** 90+ performance score; no accessibility failures.

---

## 12) Domain & Deploy

**UX Designer‚Äôs Intent:**
The site should live on its **own haunted domain**: `partytillyou.rip`. Deployment must be seamless and trustworthy ‚Äî no broken links, no leaks of the home address. Guests should feel the site is as polished as any professional event page. Behind the scenes, Cloudflare + Mailjet + Supabase ensure privacy, speed, and reliable email confirmations.

**Tasks:**

* [ ] Point DNS to Cloudflare.
* [ ] Update Supabase Auth site URLs.
* [ ] Verify Mailjet domain (SPF/DKIM).
* [ ] Deploy prod build; test RSVP email flow.
* **AC:** Live at `partytillyou.rip`, confirmations safe and accurate.

---

## 13) Nice-to-Haves

**UX Designer‚Äôs Intent:**
These are **immersive extras**: fog drifting across dark backgrounds, gallery uploads, animated page turns. They‚Äôre not required for MVP but they deepen the fairytale atmosphere. These details make the site feel like more than a utility ‚Äî they make it an experience.

**Tasks:**

* [ ] Animated fog background.
* [ ] Gallery + Guestbook with auth.
* [ ] Animated page turns, haze overlays.
